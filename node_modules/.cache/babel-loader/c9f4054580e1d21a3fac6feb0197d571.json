{"ast":null,"code":"import _objectSpread from \"/industry/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/industry/app/src/components/Line/index.js\";\nimport React, { Component } from 'react';\nimport echarts from 'echarts';\nimport ReactEcharts from 'echarts-for-react';\nimport _ from 'lodash';\nimport { themeOne } from '../echartTheme';\nimport DropList from '../DropList';\n\nclass Line extends Component {\n  constructor() {\n    super();\n    const option = {\n      tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n          // 坐标轴指示器，坐标轴触发有效\n          type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\n\n        }\n      },\n      xAxis: {\n        type: 'category',\n        boundaryGap: false,\n        data: [] //横坐标数据\n\n      },\n      yAxis: {\n        type: 'value',\n        axisLabel: {\n          formatter: '{value} M' //这里是单位\n\n        }\n      },\n      series: [],\n      grid: {\n        //视图个容器间距\n        top: 30,\n        bottom: 60,\n        left: 60,\n        right: 20 //containLabel: true\n\n      },\n      legend: {\n        type: 'scroll',\n        orient: 'horizontal',\n        center: 0,\n        bottom: 10,\n        textStyle: {\n          //图例样式\n          color: '#01D39F',\n          fontSize: '12px'\n        }\n      }\n    };\n    this.state = {\n      option,\n      onChartClick: function () {},\n      viewId: '',\n      onBrushSelected: function () {},\n      onContextmenu: function () {\n        return false;\n      },\n      dropPosition: {\n        x: \"0px\",\n        y: \"0px\"\n      },\n      dropData: [],\n      isexist: false\n    };\n  }\n\n  componentDidMount() {\n    const _this$props = this.props,\n          xData = _this$props.xData,\n          yData = _this$props.yData,\n          aUnit = _this$props.aUnit,\n          viewId = _this$props.viewId; //将折线改成曲线\n\n    let yyData = [];\n\n    if (yData && yData.length > 0) {\n      yData.map(item => {\n        if (item.type === 'line') {\n          item.smooth = true;\n          yyData.push(item);\n        } else {\n          yyData.push(item);\n        }\n      });\n    }\n\n    let onChartClick;\n    let onBrushSelected;\n    let onContextmenu;\n    let brush = {};\n    let toolbox = {\n      toolbox: {\n        show: true,\n        feature: {\n          dataZoom: {}\n        },\n        iconStyle: {\n          borderColor: '#01D39F'\n        },\n        emphasis: {\n          iconStyle: {\n            borderColor: '#ffffff'\n          }\n        }\n      }\n    };\n    let dataZoom = {};\n\n    if (this.props.dataZoom) {\n      dataZoom = {\n        dataZoom: [{\n          show: true,\n          realtime: true,\n          start: 0,\n          end: 100\n        }, {\n          type: 'inside',\n          realtime: true,\n          start: 0,\n          end: 100\n        }]\n      };\n    }\n\n    if (this.props.nozoom) {\n      toolbox = {\n        toolbox: {\n          show: true,\n          iconStyle: {\n            borderColor: '#01D39F'\n          },\n          emphasis: {\n            iconStyle: {\n              borderColor: '#ffffff'\n            }\n          }\n        }\n      };\n    } //点击事件判断\n\n\n    if (!this.props.onBrushSelected) {\n      onBrushSelected = function () {};\n    } else {\n      onBrushSelected = this.props.onBrushSelected;\n    } //点击事件判断\n\n\n    if (!this.props.onChartClick) {\n      onChartClick = function () {};\n    } else {\n      onChartClick = this.props.onChartClick;\n    } //点击事件判断\n\n\n    if (!this.props.onContextmenu) {\n      onContextmenu = function () {\n        return false;\n      };\n    } else {\n      onContextmenu = this.props.onContextmenu;\n    } //判断是否有添加brush\n\n\n    if (this.props.brush) {\n      brush = {\n        brush: {\n          toolbox: ['lineX', 'clear'],\n          //选框类型\n          xAxisIndex: 'all',\n          //对所有x轴有效\n          brushLink: 'all',\n          //关联所有对象数据\n          brushMode: 'single',\n          //启用单选模式\n          outOfBrush: {\n            //选框透明度\n            colorAlpha: 0.1\n          },\n          brushStyle: {\n            //选框样式\n            borderWidth: 1,\n            color: 'rgba(120,140,180,0.3)',\n            borderColor: 'rgba(120,140,180,0.8)'\n          },\n          throttleType: 'debounce',\n          throttleDelay: 300\n        }\n      };\n    } else {\n      brush = {};\n    } //判断工具盒是否添加\n    // if(this.props.toolbox){\n    //   toolbox = {\n    //     toolbox: {\n    //       feature: {\n    //         dataZoom: {\n    //           yAxisIndex: 'none'\n    //         },\n    //         restore: {},\n    //         saveAsImage: {}\n    //       }\n    //     }\n    //   }\n    // }else{\n    //   toolbox = {}\n    // }\n\n\n    this.setState({\n      option: Object.assign({}, _objectSpread({}, this.state.option), {\n        xAxis: {\n          data: xData,\n          //横坐标数据\n          grid: {\n            borderWidth: 0,\n            borderColor: '#e3b'\n          },\n          axisLine: {\n            //横坐标轴线\n            show: false,\n            lineStyle: {\n              //横坐标轴及其刻度颜色\n              color: 'rgba(255,255,255,0.8)',\n              width: 1\n            }\n          },\n          axisLabel: {\n            //横坐标文字\n            show: true,\n            textStyle: {\n              color: '#ffffff'\n            }\n          },\n          splitLine: {\n            //网格线\n            show: false,\n            //  改变轴线颜色\n            lineStyle: {\n              // 使用深浅的间隔色\n              color: ['red']\n            }\n          },\n          axisTick: {\n            //x轴刻度线\n            show: false\n          }\n        },\n        yAxis: {\n          axisLabel: {\n            formatter: '{value}' + aUnit //这里是单位\n\n          },\n          axisLine: {\n            show: false,\n            lineStyle: {\n              //纵坐标轴及其刻度颜色\n              color: 'rgba(255,255,255,0.8)',\n              width: 1\n            }\n          },\n          splitLine: {\n            //网格线\n            show: false,\n            //  改变轴线颜色\n            lineStyle: {\n              // 使用深浅的间隔色\n              color: ['red']\n            }\n          },\n          axisTick: {\n            //y轴刻度线\n            show: false\n          }\n        },\n        series: yyData,\n        animationThreshold: true\n      }, brush, toolbox, dataZoom),\n      onChartClick,\n      viewId,\n      onBrushSelected,\n      onContextmenu\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!(JSON.stringify(_.cloneDeep(this.props.xData)) === JSON.stringify(_.cloneDeep(nextProps.xData)) && JSON.stringify(_.cloneDeep(this.props.yData)) === JSON.stringify(_.cloneDeep(nextProps.yData)) && this.props.aUnit === nextProps.aUnit && JSON.stringify(this.props.dropListInfo) === JSON.stringify(nextProps.dropListInfo))) {\n      const _$cloneDeep = _.cloneDeep(nextProps),\n            xData = _$cloneDeep.xData,\n            yData = _$cloneDeep.yData,\n            aUnit = _$cloneDeep.aUnit; //将折线改成曲线\n\n\n      let yyData = [];\n\n      if (yData && yData.length > 0) {\n        yData.map(item => {\n          if (item.type === 'line') {\n            item.smooth = true;\n            yyData.push(item);\n          } else {\n            yyData.push(item);\n          }\n        });\n      }\n\n      this.setState({\n        option: Object.assign({}, _objectSpread({}, this.state.option), {\n          xAxis: {\n            data: xData,\n            //横坐标数据\n            grid: {\n              borderWidth: 0,\n              borderColor: '#e3b'\n            },\n            axisLine: {\n              //横坐标轴线\n              show: false,\n              lineStyle: {\n                //横坐标轴及其刻度颜色\n                color: 'rgba(255,255,255,0.8)',\n                width: 1\n              }\n            },\n            axisLabel: {\n              //横坐标文字\n              show: true,\n              textStyle: {\n                color: '#ffffff'\n              }\n            },\n            splitLine: {\n              //网格线\n              show: false,\n              //  改变轴线颜色\n              lineStyle: {\n                // 使用深浅的间隔色\n                color: ['red']\n              }\n            },\n            axisTick: {\n              //x轴刻度线\n              show: false\n            }\n          },\n          yAxis: {\n            axisLabel: {\n              formatter: '{value}' + aUnit //这里是单位\n\n            },\n            axisLine: {\n              show: false,\n              lineStyle: {\n                //纵坐标轴及其刻度颜色\n                color: 'rgba(255,255,255,0.8)',\n                width: 1\n              }\n            },\n            splitLine: {\n              //网格线\n              show: false,\n              //  改变轴线颜色\n              lineStyle: {\n                // 使用深浅的间隔色\n                color: ['red']\n              }\n            },\n            axisTick: {\n              //y轴刻度线\n              show: false\n            }\n          },\n          series: yyData\n        }),\n        dropPosition: nextProps.dropListInfo ? nextProps.dropListInfo.dropPosition : {\n          x: \"0px\",\n          y: \"0px\"\n        },\n        dropData: nextProps.dropListInfo ? nextProps.dropListInfo.dropData : [],\n        isexist: nextProps.dropListInfo ? nextProps.dropListInfo.isexist : false\n      });\n    }\n  }\n\n  render() {\n    echarts.registerTheme('my_theme', themeOne); //const viewId = this.state.viewId\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    }, React.createElement(ReactEcharts, {\n      option: this.state.option,\n      theme: \"my_theme\",\n      style: {\n        height: this.props.height ? this.props.height + \"px\" : \"300px\"\n      },\n      onEvents: {\n        'click': (params, viewId) => {\n          this.state.onChartClick(params, this.state.viewId);\n        },\n        'contextmenu': (params, viewId) => {\n          const xPosition = params.event.event.clientX;\n          const yPosition = params.event.event.clientY;\n          const position = {\n            x: xPosition,\n            y: yPosition\n          };\n          const dom = params.event.event.target;\n          const curViewId = this.state.viewId;\n          this.state.onContextmenu(params, dom, position, curViewId);\n        },\n        'brushSelected': (params, viewId) => {\n          this.state.onBrushSelected(params, this.state.viewId);\n        }\n      },\n      opts: {\n        renderer: 'canvas'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346\n      },\n      __self: this\n    }), React.createElement(DropList, {\n      dropPosition: _.cloneDeep(this.state.dropPosition),\n      dropData: _.cloneDeep(this.state.dropData),\n      isexist: _.cloneDeep(this.state.isexist),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Line; //viewId 视图ID，通常指这个视图的这条数据ID\n//xData  横轴数据，为数组\n//yData  纵轴数据，为数组\n// [{\n//      name:'邮件营销',\n//      type:'line',\n//      data:[120, 132, 101, 134, 90, 230, 210]\n//  },\n//  {\n//      name:'联盟广告',\n//      type:'line',\n//      data:[220, 182, 191, 234, 290, 330, 310]\n//  }]\n//aUnit  单位，字符串\n//toolbox  值为布尔值，是否开启工具盒 默认为false\n//brush 值为布尔值，是否开启刷子工具  默认为false\n//onChartClick  值为一个函数，默认为空\n//onBrushSelected 值为一个函数，默认为空","map":{"version":3,"sources":["/industry/app/src/components/Line/index.js"],"names":["React","Component","echarts","ReactEcharts","_","themeOne","DropList","Line","constructor","option","tooltip","trigger","axisPointer","type","xAxis","boundaryGap","data","yAxis","axisLabel","formatter","series","grid","top","bottom","left","right","legend","orient","center","textStyle","color","fontSize","state","onChartClick","viewId","onBrushSelected","onContextmenu","dropPosition","x","y","dropData","isexist","componentDidMount","props","xData","yData","aUnit","yyData","length","map","item","smooth","push","brush","toolbox","show","feature","dataZoom","iconStyle","borderColor","emphasis","realtime","start","end","nozoom","xAxisIndex","brushLink","brushMode","outOfBrush","colorAlpha","brushStyle","borderWidth","throttleType","throttleDelay","setState","Object","assign","axisLine","lineStyle","width","splitLine","axisTick","animationThreshold","componentWillReceiveProps","nextProps","JSON","stringify","cloneDeep","dropListInfo","render","registerTheme","height","params","xPosition","event","clientX","yPosition","clientY","position","dom","target","curViewId","renderer"],"mappings":"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","sourcesContent":["import React ,{ Component } from 'react'\r\nimport echarts from 'echarts'\r\nimport ReactEcharts from 'echarts-for-react'\r\nimport _ from 'lodash'\r\nimport { themeOne } from '../echartTheme'\r\nimport DropList from '../DropList'\r\nclass Line extends Component{\r\n  constructor(){\r\n    super()\r\n    const option = {\r\n\t    tooltip: {\r\n    \t\ttrigger: 'axis',\r\n    \t\taxisPointer : {            // 坐标轴指示器，坐标轴触发有效\r\n      \t\ttype : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'\r\n    \t\t}\r\n      },\r\n      xAxis: {\r\n          type: 'category',\r\n\t\t      boundaryGap: false,\r\n          data: [] //横坐标数据\r\n      },\r\n      yAxis: {\r\n          type: 'value',\r\n          axisLabel: {\r\n              formatter: '{value} M' //这里是单位\r\n          }\r\n      },\r\n\r\n      series: [],\r\n      grid:{ //视图个容器间距\r\n        top: 30,\r\n        bottom: 60,\r\n        left: 60,\r\n        right: 20,\r\n        //containLabel: true\r\n      },\r\n\r\n      legend: {\r\n        type: 'scroll',\r\n        orient: 'horizontal',\r\n        center: 0,\r\n        bottom: 10,\r\n        textStyle:{ //图例样式\r\n        color: '#01D39F',\r\n        fontSize:'12px'\r\n      }\r\n      }\r\n    }\r\n\r\n    this.state={\r\n      option,\r\n      onChartClick: function(){},\r\n      viewId: '',\r\n      onBrushSelected: function(){},\r\n      onContextmenu: function(){return false},\r\n\r\n      dropPosition:{x:\"0px\",y:\"0px\"},\r\n      dropData: [],\r\n      isexist: false\r\n    }\r\n  }\r\n  componentDidMount(){\r\n    const {xData,yData,aUnit,viewId} = this.props\r\n    //将折线改成曲线\r\n    let yyData = []\r\n    if(yData && yData.length>0){\r\n      yData.map(item=>{\r\n        if(item.type === 'line'){\r\n          item.smooth = true\r\n          yyData.push(item)\r\n        }else{\r\n          yyData.push(item)\r\n        }\r\n      })\r\n    }\r\n    let onChartClick\r\n    let onBrushSelected\r\n    let onContextmenu\r\n    let brush = {}\r\n    let toolbox = {\r\n      toolbox:{\r\n        show: true,\r\n        feature: {\r\n          dataZoom:{\r\n          }\r\n        },\r\n        iconStyle:{\r\n          borderColor:'#01D39F',\r\n        },\r\n        emphasis:{\r\n          iconStyle: {\r\n            borderColor: '#ffffff'\r\n          }\r\n        }\r\n      }\r\n    }\r\n    let dataZoom = {}\r\n    if(this.props.dataZoom){\r\n      dataZoom =  {\r\n        dataZoom: [\r\n          {\r\n              show: true,\r\n              realtime: true,\r\n              start: 0,\r\n              end: 100,\r\n          },\r\n          {\r\n              type: 'inside',\r\n              realtime: true,\r\n              start: 0,\r\n              end: 100\r\n          }\r\n      ]}\r\n    }\r\n\r\n    if(this.props.nozoom){\r\n      toolbox = {\r\n        toolbox:{\r\n          show: true,\r\n          iconStyle:{\r\n            borderColor:'#01D39F',\r\n          },\r\n          emphasis:{\r\n            iconStyle: {\r\n              borderColor: '#ffffff'\r\n            }\r\n          }\r\n\r\n        }\r\n      }\r\n    }\r\n    //点击事件判断\r\n    if(!this.props.onBrushSelected){\r\n       onBrushSelected = function(){}\r\n    }else{\r\n       onBrushSelected = this.props.onBrushSelected\r\n    }\r\n    //点击事件判断\r\n    if(!this.props.onChartClick){\r\n       onChartClick = function(){}\r\n    }else{\r\n       onChartClick = this.props.onChartClick\r\n    }\r\n    //点击事件判断\r\n    if(!this.props.onContextmenu){\r\n       onContextmenu = function(){return false}\r\n    }else{\r\n       onContextmenu = this.props.onContextmenu\r\n    }\r\n    //判断是否有添加brush\r\n    if(this.props.brush){\r\n      brush = {\r\n        brush:{\r\n          toolbox: ['lineX','clear'],//选框类型\r\n          xAxisIndex: 'all',//对所有x轴有效\r\n          brushLink: 'all',//关联所有对象数据\r\n          brushMode: 'single',//启用单选模式\r\n          outOfBrush: { //选框透明度\r\n              colorAlpha: 0.1\r\n          },\r\n          brushStyle:{ //选框样式\r\n            borderWidth: 1,\r\n            color: 'rgba(120,140,180,0.3)',\r\n            borderColor: 'rgba(120,140,180,0.8)'\r\n          },\r\n          throttleType:'debounce',\r\n          throttleDelay: 300\r\n        }\r\n      }\r\n    }else{\r\n      brush = {}\r\n    }\r\n    //判断工具盒是否添加\r\n    // if(this.props.toolbox){\r\n    //   toolbox = {\r\n    //     toolbox: {\r\n    //       feature: {\r\n    //         dataZoom: {\r\n    //           yAxisIndex: 'none'\r\n    //         },\r\n    //         restore: {},\r\n    //         saveAsImage: {}\r\n    //       }\r\n    //     }\r\n    //   }\r\n    // }else{\r\n    //   toolbox = {}\r\n    // }\r\n\r\n    this.setState({\r\n      option: Object.assign({},{...this.state.option},{\r\n        xAxis: {\r\n            data: xData, //横坐标数据\r\n            grid:{\t borderWidth:0,\r\n           borderColor:'#e3b'\r\n            },\r\n            axisLine:{ //横坐标轴线\r\n              show: false,\r\n              lineStyle:{  //横坐标轴及其刻度颜色\r\n                  color:'rgba(255,255,255,0.8)',\r\n                  width:1\r\n              }\r\n            },\r\n          axisLabel: { //横坐标文字\r\n              show: true,\r\n              textStyle: {\r\n                  color: '#ffffff',\r\n              }\r\n          },\r\n          splitLine: { //网格线\r\n            show: false,\r\n            //  改变轴线颜色\r\n            lineStyle: {\r\n                // 使用深浅的间隔色\r\n                color: ['red']\r\n            }\r\n          },\r\n          axisTick: {       //x轴刻度线\r\n            show: false,\r\n          }\r\n        },\r\n        yAxis: {\r\n            axisLabel: {\r\n                formatter: '{value}'+aUnit //这里是单位\r\n            },\r\n            axisLine:{\r\n              show: false,\r\n              lineStyle:{ //纵坐标轴及其刻度颜色\r\n                color:'rgba(255,255,255,0.8)',\r\n                width:1\r\n              }\r\n          },\r\n          splitLine: { //网格线\r\n            show: false,\r\n            //  改变轴线颜色\r\n            lineStyle: {\r\n                // 使用深浅的间隔色\r\n                color: ['red']\r\n            }\r\n        },\r\n        axisTick: {       //y轴刻度线\r\n            show: false\r\n          }\r\n        },\r\n        series: yyData,\r\n        animationThreshold:true,\r\n      },\r\n      brush,\r\n      toolbox,\r\n      dataZoom\r\n    ),\r\n      onChartClick,\r\n      viewId,\r\n      onBrushSelected,\r\n      onContextmenu\r\n    })\r\n  }\r\n  componentWillReceiveProps(nextProps){\r\n    if(!(\r\n      JSON.stringify(_.cloneDeep(this.props.xData)) === JSON.stringify(_.cloneDeep(nextProps.xData)) &&\r\n      JSON.stringify(_.cloneDeep(this.props.yData)) === JSON.stringify(_.cloneDeep(nextProps.yData)) &&\r\n      this.props.aUnit === nextProps.aUnit &&\r\n      JSON.stringify(this.props.dropListInfo) === JSON.stringify(nextProps.dropListInfo)\r\n    )){\r\n      const {xData,yData,aUnit} = _.cloneDeep(nextProps)\r\n      //将折线改成曲线\r\n      let yyData = []\r\n      if(yData && yData.length>0){\r\n        yData.map(item=>{\r\n          if(item.type === 'line'){\r\n            item.smooth = true\r\n            yyData.push(item)\r\n          }else{\r\n            yyData.push(item)\r\n          }\r\n        })\r\n      }\r\n      this.setState({\r\n        option: Object.assign({},{...this.state.option},{\r\n          xAxis: {\r\n              data: xData, //横坐标数据\r\n              grid:{\t borderWidth:0,\r\n             borderColor:'#e3b'\r\n              },\r\n              axisLine:{ //横坐标轴线\r\n                show: false,\r\n                lineStyle:{  //横坐标轴及其刻度颜色\r\n                    color:'rgba(255,255,255,0.8)',\r\n                    width:1\r\n                }\r\n              },\r\n            axisLabel: { //横坐标文字\r\n                show: true,\r\n                textStyle: {\r\n                    color: '#ffffff',\r\n                }\r\n            },\r\n            splitLine: { //网格线\r\n              show: false,\r\n              //  改变轴线颜色\r\n              lineStyle: {\r\n                  // 使用深浅的间隔色\r\n                  color: ['red']\r\n              }\r\n            },\r\n            axisTick: {       //x轴刻度线\r\n              show: false,\r\n            }\r\n          },\r\n          yAxis: {\r\n              axisLabel: {\r\n                  formatter: '{value}'+aUnit //这里是单位\r\n              },\r\n              axisLine:{\r\n                show: false,\r\n                lineStyle:{ //纵坐标轴及其刻度颜色\r\n                  color:'rgba(255,255,255,0.8)',\r\n                  width:1\r\n                }\r\n            },\r\n            splitLine: { //网格线\r\n              show: false,\r\n              //  改变轴线颜色\r\n              lineStyle: {\r\n                  // 使用深浅的间隔色\r\n                  color: ['red']\r\n              }\r\n          },\r\n          axisTick: {       //y轴刻度线\r\n              show: false\r\n            }\r\n          },\r\n          series: yyData\r\n        }),\r\n        dropPosition: nextProps.dropListInfo?nextProps.dropListInfo.dropPosition:{x:\"0px\",y:\"0px\"},\r\n        dropData: nextProps.dropListInfo?nextProps.dropListInfo.dropData:[],\r\n        isexist: nextProps.dropListInfo?nextProps.dropListInfo.isexist:false\r\n      })\r\n    }\r\n  }\r\n  render(){\r\n    echarts.registerTheme('my_theme',themeOne)\r\n    //const viewId = this.state.viewId\r\n    return(\r\n      <div>\r\n        <ReactEcharts\r\n          option={this.state.option}\r\n          theme=\"my_theme\"\r\n          style={{height: this.props.height?this.props.height+\"px\":\"300px\"}}\r\n          onEvents={\r\n            {\r\n              'click': (params,viewId)=>{this.state.onChartClick(params,this.state.viewId)},\r\n              'contextmenu':(params,viewId)=>{\r\n                const xPosition = params.event.event.clientX\r\n                const yPosition = params.event.event.clientY\r\n                const position= {\r\n                  x: xPosition,\r\n                  y: yPosition\r\n                }\r\n                const dom = params.event.event.target\r\n                const curViewId = this.state.viewId\r\n                this.state.onContextmenu(params,dom,position,curViewId)\r\n              },\r\n              'brushSelected' : (params,viewId)=>{this.state.onBrushSelected(params,this.state.viewId)}\r\n            }\r\n          }\r\n          opts={{renderer: 'canvas'}}\r\n        />\r\n        <DropList\r\n          dropPosition={_.cloneDeep(this.state.dropPosition)}\r\n          dropData={_.cloneDeep(this.state.dropData)}\r\n          isexist={_.cloneDeep(this.state.isexist)}/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Line\r\n\r\n//viewId 视图ID，通常指这个视图的这条数据ID\r\n//xData  横轴数据，为数组\r\n//yData  纵轴数据，为数组\r\n// [{\r\n//      name:'邮件营销',\r\n//      type:'line',\r\n//      data:[120, 132, 101, 134, 90, 230, 210]\r\n//  },\r\n//  {\r\n//      name:'联盟广告',\r\n//      type:'line',\r\n//      data:[220, 182, 191, 234, 290, 330, 310]\r\n//  }]\r\n//aUnit  单位，字符串\r\n//toolbox  值为布尔值，是否开启工具盒 默认为false\r\n//brush 值为布尔值，是否开启刷子工具  默认为false\r\n//onChartClick  值为一个函数，默认为空\r\n//onBrushSelected 值为一个函数，默认为空\r\n"]},"metadata":{},"sourceType":"module"}