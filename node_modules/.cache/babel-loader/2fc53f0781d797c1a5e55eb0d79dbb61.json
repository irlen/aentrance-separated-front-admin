{"ast":null,"code":"import \"antd/es/date-picker/style\";\nimport _DatePicker from \"antd/es/date-picker\";\nvar _jsxFileName = \"/industry/app/src/components/WyDatePicker/index.js\";\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport propTypes from 'prop-types';\nimport _ from 'lodash';\nconst RangePicker = _DatePicker.RangePicker;\nconst now1 = moment();\nconst now2 = moment();\nconst Now = now1.add(0, 'h');\nconst oneHourBefore = now2.subtract(1, 'h');\n\nclass WyDatePicker extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      curTime: [],\n      isSubmit: false\n    };\n\n    this.rangeTimeChange = (dates, dateStrings) => {\n      this.setState({\n        curTime: [...dateStrings],\n        isSubmit: false\n      });\n    };\n\n    this.timeOk = () => {\n      this.setState({\n        isSubmit: true\n      });\n    };\n\n    this.disabledDate = current => {\n      return current && current > moment().endOf('day');\n    };\n  }\n\n  componentDidMount() {\n    const curTime = this.props.curTime;\n    this.setState({\n      curTime,\n      isSubmit: false\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (JSON.stringify(_.cloneDeep(this.props.curTime)) !== JSON.stringify(_.cloneDeep(nextProps.curTime))) {\n      const curTime = nextProps.curTime;\n      this.setState({\n        curTime,\n        isSubmit: false\n      });\n    }\n  }\n\n  //时间下拉隐藏回调函数，检测\n  // getSlideStatus = (status)=>{\n  //   if(status === false && this.props.rangeTimeChange){\n  //     console.log('消失')\n  //     console.log(this.state.curTime)\n  //     this.props.rangeTimeChange(this.state.curTime)\n  //   }\n  // }\n  componentWillUpdate(nextProps, nextState) {\n    if (this.props.rangeTimeChange && nextState.isSubmit === true) {\n      this.props.rangeTimeChange(nextState.curTime);\n      this.setState({\n        isSubmit: false\n      });\n    }\n  }\n\n  //defaultValue={[moment(oneHourBefore,'YYYY-MM-DD HH:mm'),moment(Now,'YYYY-MM-DD HH:mm')]}\n  render() {\n    return React.createElement(RangePicker, {\n      size: this.props.size ? this.props.size : 'small',\n      style: this.props.style ? this.props.style : {\n        width: \"100%\",\n        maxWidth: \"360px\"\n      },\n      allowClear: false,\n      ranges: {\n        '当前小时': [moment().startOf('hour'), moment()],\n        '今天': [moment().startOf('day'), moment()],\n        '本周': [moment().startOf('week'), moment()],\n        '本月': [moment().startOf('month'), moment()],\n        '本年度': [moment().startOf('year'), moment()],\n        '最近一小时': [moment().subtract(1, 'h'), moment()],\n        '最近15分钟': [moment().subtract(15, 'm'), moment()],\n        '最近30分钟': [moment().subtract(30, 'm'), moment()],\n        '最近一天': [moment().subtract(1, 'd'), moment()],\n        '最近一周': [moment().subtract(1, 'w'), moment()],\n        '最近一个月': [moment().subtract(1, 'M'), moment()],\n        '最近一年': [moment().subtract(1, 'y'), moment()]\n      },\n      disabledDate: this.disabledDate,\n      showTime: {\n        format: 'HH:mm:ss'\n      },\n      format: \"YYYY-MM-DD HH:mm:ss\",\n      value: this.state.curTime && this.state.curTime.length > 0 ? [moment(this.state.curTime[0], 'YYYY-MM-DD HH:mm:ss'), moment(this.state.curTime[1], 'YYYY-MM-DD HH:mm:ss')] : [],\n      onChange: this.rangeTimeChange,\n      onOk: this.timeOk,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    });\n  }\n\n}\n\nWyDatePicker.propTypes = {\n  curTime: propTypes.array,\n  rangeTimeChange: propTypes.func\n};\nexport default WyDatePicker;","map":{"version":3,"sources":["/industry/app/src/components/WyDatePicker/index.js"],"names":["React","Component","moment","propTypes","_","RangePicker","now1","now2","Now","add","oneHourBefore","subtract","WyDatePicker","state","curTime","isSubmit","rangeTimeChange","dates","dateStrings","setState","timeOk","disabledDate","current","endOf","componentDidMount","props","componentWillReceiveProps","nextProps","JSON","stringify","cloneDeep","componentWillUpdate","nextState","render","size","style","width","maxWidth","startOf","format","length","array","func"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { DatePicker } from 'antd';\r\nimport moment from 'moment';\r\nimport propTypes from 'prop-types'\r\nimport _ from 'lodash'\r\nconst RangePicker = DatePicker.RangePicker;\r\nconst now1 = moment()\r\nconst now2 = moment()\r\nconst Now = now1.add(0,'h')\r\nconst oneHourBefore = now2.subtract(1,'h')\r\nclass WyDatePicker extends Component{\r\n  state={\r\n    curTime: [],\r\n    isSubmit: false\r\n  }\r\n\r\n  componentDidMount(){\r\n      const { curTime } = this.props\r\n      this.setState({\r\n        curTime,\r\n        isSubmit: false\r\n      })\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps){\r\n    if(JSON.stringify(_.cloneDeep(this.props.curTime)) !== JSON.stringify(_.cloneDeep(nextProps.curTime))){\r\n      const { curTime } = nextProps\r\n      this.setState({\r\n        curTime,\r\n        isSubmit: false\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  rangeTimeChange = (dates, dateStrings)=>{\r\n    this.setState({\r\n      curTime: [...dateStrings],\r\n      isSubmit: false\r\n    })\r\n  }\r\n\r\n  //时间下拉隐藏回调函数，检测\r\n  // getSlideStatus = (status)=>{\r\n  //   if(status === false && this.props.rangeTimeChange){\r\n  //     console.log('消失')\r\n  //     console.log(this.state.curTime)\r\n  //     this.props.rangeTimeChange(this.state.curTime)\r\n  //   }\r\n  // }\r\n  componentWillUpdate(nextProps,nextState){\r\n    if(this.props.rangeTimeChange && nextState.isSubmit === true){\r\n      this.props.rangeTimeChange(nextState.curTime)\r\n      this.setState({\r\n        isSubmit: false\r\n      })\r\n    }\r\n  }\r\n  timeOk=()=>{\r\n    this.setState({\r\n      isSubmit: true\r\n    })\r\n  }\r\n  //不可选时间\r\n  disabledDate = (current)=>{\r\n    return current && current>moment().endOf('day')\r\n  }\r\n\r\n  //defaultValue={[moment(oneHourBefore,'YYYY-MM-DD HH:mm'),moment(Now,'YYYY-MM-DD HH:mm')]}\r\n  render(){\r\n    return(\r\n        <RangePicker\r\n            size={this.props.size?this.props.size: 'small'}\r\n            style={this.props.style?this.props.style:{width:\"100%\",maxWidth:\"360px\"}}\r\n            allowClear={false}\r\n            ranges={{\r\n              '当前小时':[moment().startOf('hour'), moment()],\r\n              '今天':[moment().startOf('day'), moment()],\r\n              '本周':[moment().startOf('week'), moment()],\r\n              '本月':[moment().startOf('month'), moment()],\r\n              '本年度':[moment().startOf('year'), moment()],\r\n\r\n              '最近一小时':[moment().subtract(1,'h'),moment()],\r\n              '最近15分钟':[moment().subtract(15,'m'),moment()],\r\n              '最近30分钟':[moment().subtract(30,'m'),moment()],\r\n              '最近一天': [moment().subtract(1,'d'), moment()],\r\n              '最近一周': [moment().subtract(1,'w'), moment()],\r\n              '最近一个月': [moment().subtract(1,'M'), moment()],\r\n              '最近一年': [moment().subtract(1,'y'), moment()]\r\n            }}\r\n            disabledDate={this.disabledDate}\r\n            showTime={{format:'HH:mm:ss'}}\r\n            format=\"YYYY-MM-DD HH:mm:ss\"\r\n            value={this.state.curTime && this.state.curTime.length >0? [moment(this.state.curTime[0],'YYYY-MM-DD HH:mm:ss'),moment(this.state.curTime[1],'YYYY-MM-DD HH:mm:ss')]:[]}\r\n            onChange={this.rangeTimeChange}\r\n            onOk={this.timeOk}\r\n        />\r\n    )\r\n  }\r\n}\r\n\r\nWyDatePicker.propTypes = {\r\n  curTime: propTypes.array,\r\n  rangeTimeChange: propTypes.func\r\n}\r\n\r\nexport default WyDatePicker\r\n"]},"metadata":{},"sourceType":"module"}