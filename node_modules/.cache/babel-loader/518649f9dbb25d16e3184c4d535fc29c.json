{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction Overlay(options) {\n  this.options = options || {};\n  this._point = options.point;\n  this._fillColor = options.fillStyle || '#1495ff';\n  this._size = options.size || 30;\n  this._lineWidth = options.lineWidth === undefined ? 2 : options.lineWidth;\n  this._strokeStyle = options.strokeStyle || '#ffffff';\n\n  if (options.strokeOpacity) {\n    this._strokeStyle = colorRgb(this._strokeStyle, 0.4);\n  }\n}\n\nOverlay.prototype = new BMap.Overlay();\n\nOverlay.prototype.initialize = function (map) {\n  this._map = map;\n  var div = this._div = document.createElement(\"div\");\n  var style = div.style;\n  style.position = \"absolute\";\n  style.backgroundClip = 'padding-box';\n  style.zIndex = this.options.zIndex || BMap.Overlay.getZIndex(this._point.lat);\n  style.backgroundColor = this._fillColor;\n\n  if (this.options.isShowShadow !== false) {\n    style.boxShadow = '0 0 5px rgba(0, 0, 0, 0.5)';\n  }\n\n  style.border = this._lineWidth + \"px solid \" + this._strokeStyle;\n  style.color = \"white\";\n  style.textShadow = \"0px 0px 5px #fff\";\n  style.width = this._size + \"px\";\n  style.boxSizing = \"content-box\";\n  style.borderRadius = \"30px\";\n  style.height = this._size + \"px\";\n  style.lineHeight = this._size + \"px\";\n  style.fontSize = \"12px\";\n  style.cursor = \"pointer\";\n  style.textAlign = \"center\";\n  style.MozUserSelect = \"none\";\n\n  if (this.options.number && this.options.isShowNumber !== false) {\n    div.innerHTML = this.options.number;\n  }\n\n  var self = this;\n  div.addEventListener('mouseover', function () {\n    self.dispatchEvent('mouseover', self.options.number);\n    style.backgroundColor = '#1495ff';\n  });\n  div.addEventListener('mouseout', function () {\n    self.dispatchEvent('mouseout', self.options.number);\n    style.backgroundColor = self._fillColor;\n  });\n  div.addEventListener('click', function () {\n    self.dispatchEvent('click', self.options.number);\n  });\n  map.getPanes().markerPane.appendChild(div);\n  return div;\n};\n\nOverlay.prototype.draw = function () {\n  var map = this._map;\n  var pixel = map.pointToOverlayPixel(this._point);\n  this._div.style.left = pixel.x - (this._size + this._lineWidth) / 2 - 1 + \"px\";\n  this._div.style.top = pixel.y - (this._size + this._lineWidth) / 2 - 2 + \"px\";\n};\n/*16进制颜色转为RGB格式*/\n\n\nfunction colorRgb(color, opacity) {\n  var reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;\n  var sColor = color.toLowerCase();\n\n  if (sColor && reg.test(sColor)) {\n    if (sColor.length === 4) {\n      var sColorNew = \"#\";\n\n      for (var i = 1; i < 4; i += 1) {\n        sColorNew += sColor.slice(i, i + 1).concat(sColor.slice(i, i + 1));\n      }\n\n      sColor = sColorNew;\n    } //处理六位的颜色值  \n\n\n    var sColorChange = [];\n\n    for (var i = 1; i < 7; i += 2) {\n      sColorChange.push(parseInt(\"0x\" + sColor.slice(i, i + 2)));\n    }\n\n    if (opacity) {\n      sColorChange.push(opacity);\n      return \"rgba(\" + sColorChange.join(\",\") + \")\";\n    } else {\n      return \"rgb(\" + sColorChange.join(\",\") + \")\";\n    }\n  } else {\n    return sColor;\n  }\n}\n\n;\nexports.default = Overlay;","map":null,"metadata":{},"sourceType":"script"}