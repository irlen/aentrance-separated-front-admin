{"ast":null,"code":"import \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nimport axios from 'axios';\nimport Qs from 'qs';\nimport { host } from '../Host';\n\nconst wyAxiosPost = (url, data, callback) => {\n  const dataAuthList = [];\n\n  if (localStorage.userAuth && JSON.parse(localStorage.userAuth).dataAuth.length > 0) {\n    const dataAuth = JSON.parse(localStorage.userAuth).dataAuth;\n    dataAuth.map(item => {\n      dataAuthList.push(item.api_name);\n    });\n  }\n\n  if (dataAuthList.length > 0 && dataAuthList.indexOf(url) !== -1) {\n    _message.warning(\"非常抱歉，您没有权限进行此操作\");\n\n    return;\n  }\n\n  const wholeUrl = host + url;\n  let udata = data;\n\n  if (localStorage.userInfo) {\n    udata = Object.assign({}, data, {\n      userInfo: localStorage.userInfo\n    });\n  }\n\n  const postData = Qs.stringify(udata);\n  axios.defaults.withCredentials = true;\n  axios({\n    url: wholeUrl,\n    data: postData,\n    method: \"post\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\"\n    }\n  }).then(result => {\n    if (result.data.ret === 200) {\n      if (result.data.data.status === 1) {\n        callback(result.data);\n      } else {\n        //message.error(url+':'+result.data.data.msg)\n        _message.error(result.data.data.msg);\n      }\n    } else {\n      //message.error('业务请求错误：'+url+result.data.msg)\n      _message.error(result.data.msg);\n    }\n  }).catch(error => {\n    // message.error('系统请求错误：'+url+error)\n    //message.error(error)\n    return;\n  });\n};\n\nexport { wyAxiosPost };","map":{"version":3,"sources":["/industry/app/src/components/WyAxios/index.js"],"names":["axios","Qs","host","wyAxiosPost","url","data","callback","dataAuthList","localStorage","userAuth","JSON","parse","dataAuth","length","map","item","push","api_name","indexOf","warning","wholeUrl","udata","userInfo","Object","assign","postData","stringify","defaults","withCredentials","method","headers","then","result","ret","status","error","msg","catch"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,IAAf;AAEA,SAASC,IAAT,QAAqB,SAArB;;AAEA,MAAMC,WAAW,GAAG,CAACC,GAAD,EAAKC,IAAL,EAAUC,QAAV,KAAqB;AACvC,QAAMC,YAAY,GAAG,EAArB;;AACA,MAAGC,YAAY,CAACC,QAAb,IAAyBC,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,QAAxB,EAAkCG,QAAlC,CAA2CC,MAA3C,GAAkD,CAA9E,EAAgF;AAC9E,UAAMD,QAAQ,GAAGF,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,QAAxB,EAAkCG,QAAnD;AACAA,IAAAA,QAAQ,CAACE,GAAT,CAAaC,IAAI,IAAE;AACjBR,MAAAA,YAAY,CAACS,IAAb,CAAkBD,IAAI,CAACE,QAAvB;AACD,KAFD;AAGD;;AACD,MAAGV,YAAY,CAACM,MAAb,GAAoB,CAApB,IAAyBN,YAAY,CAACW,OAAb,CAAqBd,GAArB,MAA8B,CAAC,CAA3D,EAA6D;AAC3D,aAAQe,OAAR,CAAgB,iBAAhB;;AACA;AACD;;AAED,QAAMC,QAAQ,GAAGlB,IAAI,GAACE,GAAtB;AACA,MAAIiB,KAAK,GAAGhB,IAAZ;;AACA,MAAGG,YAAY,CAACc,QAAhB,EAAyB;AACvBD,IAAAA,KAAK,GAAGE,MAAM,CAACC,MAAP,CAAc,EAAd,EAAiBnB,IAAjB,EAAsB;AAACiB,MAAAA,QAAQ,EAACd,YAAY,CAACc;AAAvB,KAAtB,CAAR;AACD;;AACD,QAAMG,QAAQ,GAAGxB,EAAE,CAACyB,SAAH,CAAaL,KAAb,CAAjB;AACArB,EAAAA,KAAK,CAAC2B,QAAN,CAAeC,eAAf,GAA+B,IAA/B;AACA5B,EAAAA,KAAK,CAAC;AACJI,IAAAA,GAAG,EAAEgB,QADD;AAEJf,IAAAA,IAAI,EAAEoB,QAFF;AAGJI,IAAAA,MAAM,EAAE,MAHJ;AAIJC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT;AAJL,GAAD,CAAL,CAQAC,IARA,CAQMC,MAAD,IAAU;AACb,QAAGA,MAAM,CAAC3B,IAAP,CAAY4B,GAAZ,KAAoB,GAAvB,EAA2B;AACzB,UAAGD,MAAM,CAAC3B,IAAP,CAAYA,IAAZ,CAAiB6B,MAAjB,KAA4B,CAA/B,EAAiC;AAC/B5B,QAAAA,QAAQ,CAAC0B,MAAM,CAAC3B,IAAR,CAAR;AACD,OAFD,MAEK;AACH;AACA,iBAAQ8B,KAAR,CAAcH,MAAM,CAAC3B,IAAP,CAAYA,IAAZ,CAAiB+B,GAA/B;AACD;AACF,KAPD,MAOK;AACH;AACA,eAAQD,KAAR,CAAcH,MAAM,CAAC3B,IAAP,CAAY+B,GAA1B;AACD;AACF,GApBD,EAoBGC,KApBH,CAoBSF,KAAK,IAAE;AACf;AACA;AACC;AACD,GAxBD;AAyBD,CA7CD;;AA+CA,SAAShC,WAAT","sourcesContent":["import axios from 'axios'\r\nimport Qs from 'qs'\r\nimport { message } from 'antd'\r\nimport { host } from '../Host'\r\n\r\nconst wyAxiosPost = (url,data,callback)=>{\r\n  const dataAuthList = []\r\n  if(localStorage.userAuth && JSON.parse(localStorage.userAuth).dataAuth.length>0){\r\n    const dataAuth = JSON.parse(localStorage.userAuth).dataAuth\r\n    dataAuth.map(item=>{\r\n      dataAuthList.push(item.api_name)\r\n    })\r\n  }\r\n  if(dataAuthList.length>0 && dataAuthList.indexOf(url) !== -1){\r\n    message.warning(\"非常抱歉，您没有权限进行此操作\")\r\n    return\r\n  }\r\n\r\n  const wholeUrl = host+url\r\n  let udata = data\r\n  if(localStorage.userInfo){\r\n    udata = Object.assign({},data,{userInfo:localStorage.userInfo})\r\n  }\r\n  const postData = Qs.stringify(udata)\r\n  axios.defaults.withCredentials=true\r\n  axios({\r\n    url: wholeUrl,\r\n    data: postData,\r\n    method: \"post\",\r\n    headers: {\r\n      \"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\"\r\n    }\r\n  }\r\n).then((result)=>{\r\n    if(result.data.ret === 200){\r\n      if(result.data.data.status === 1){\r\n        callback(result.data)\r\n      }else{\r\n        //message.error(url+':'+result.data.data.msg)\r\n        message.error(result.data.data.msg)\r\n      }\r\n    }else{\r\n      //message.error('业务请求错误：'+url+result.data.msg)\r\n      message.error(result.data.msg)\r\n    }\r\n  }).catch(error=>{\r\n\t  // message.error('系统请求错误：'+url+error)\r\n\t  //message.error(error)\r\n    return\r\n  })\r\n}\r\n\r\nexport { wyAxiosPost }\r\n"]},"metadata":{},"sourceType":"module"}