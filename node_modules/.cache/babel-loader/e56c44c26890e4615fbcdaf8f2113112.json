{"ast":null,"code":"import \"antd/es/table/style\";\nimport _Table from \"antd/es/table\";\nvar _jsxFileName = \"/industry/app/src/components/WyTable/index.js\";\nimport React, { Component } from 'react';\nimport _ from 'lodash';\nimport DropList from '../DropList';\nimport sortColumns from '../TableSort';\n\nclass WyTable extends Component {\n  constructor() {\n    super();\n    this.state = {\n      xData: [],\n      yData: [],\n      onTableClick: function () {},\n      onTableContextmenu: function () {},\n      dropPosition: {\n        x: \"0px\",\n        y: \"0px\"\n      },\n      dropData: [],\n      isexist: false\n    };\n  }\n\n  componentDidMount() {\n    const _this$props = this.props,\n          xData = _this$props.xData,\n          yData = _this$props.yData;\n    let onTableClick;\n    let onTableContextmenu; //点击事件判断\n\n    if (!this.props.onTableClick) {\n      onTableClick = function () {};\n    } else {\n      onTableClick = this.props.onTableClick;\n    } //右键点击事件判断\n\n\n    if (!this.props.onTableContextmenu) {\n      onTableContextmenu = function () {};\n    } else {\n      onTableContextmenu = this.props.onTableContextmenu;\n    }\n\n    this.setState({\n      xData: sortColumns(xData),\n      yData: yData,\n      onTableClick,\n      onTableContextmenu\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.activeRowKey) {\n      if (!(JSON.stringify(_.cloneDeep(this.props.xData)) === JSON.stringify(_.cloneDeep(nextProps.xData)) && JSON.stringify(_.cloneDeep(this.props.yData)) === JSON.stringify(_.cloneDeep(nextProps.yData)) && this.props.activeRowKey === nextProps.activeRowKey && JSON.stringify(this.props.dropListInfo) === JSON.stringify(nextProps.dropListInfo))) {\n        this.setState({\n          xData: sortColumns(nextProps.xData),\n          yData: [...nextProps.yData],\n          dropPosition: nextProps.dropListInfo ? nextProps.dropListInfo.dropPosition : {\n            x: \"0px\",\n            y: \"0px\"\n          },\n          dropData: nextProps.dropListInfo ? nextProps.dropListInfo.dropData : [],\n          isexist: nextProps.dropListInfo ? nextProps.dropListInfo.isexist : false\n        });\n      }\n    } else {\n      if (!(JSON.stringify(_.cloneDeep(this.props.xData)) === JSON.stringify(_.cloneDeep(nextProps.xData)) && JSON.stringify(_.cloneDeep(this.props.yData)) === JSON.stringify(_.cloneDeep(nextProps.yData)) && JSON.stringify(this.props.dropListInfo) === JSON.stringify(nextProps.dropListInfo))) {\n        this.setState({\n          xData: sortColumns(nextProps.xData),\n          yData: [...nextProps.yData],\n          dropPosition: nextProps.dropListInfo ? nextProps.dropListInfo.dropPosition : {\n            x: \"0px\",\n            y: \"0px\"\n          },\n          dropData: nextProps.dropListInfo ? nextProps.dropListInfo.dropData : [],\n          isexist: nextProps.dropListInfo ? nextProps.dropListInfo.isexist : false\n        });\n      }\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(_Table, {\n      size: \"small\",\n      columns: this.state.xData,\n      dataSource: this.state.yData,\n      pagination: {\n        pageSize: this.props.pageSize ? this.props.pageSize : 5,\n        pageSizeOptions: [\"5\", \"10\", \"20\", \"30\", \"40\"],\n        showSizeChanger: true,\n        showQuickJumper: true,\n        onShowSizeChange: this.props.onShowSizeChange ? (current, size) => this.props.onShowSizeChange(current, size) : function () {}\n      },\n      rowSelection: this.props.rowSelection ? this.props.rowSelection : undefined,\n      expandedRowRender: this.props.expandedRowRender ? this.props.expandedRowRender : undefined,\n      onRow: record => {\n        return {\n          onClick: () => {\n            this.state.onTableClick(record);\n          },\n          onContextMenu: event => {\n            let e = event || window.event;\n            const xPosition = e.clientX;\n            const yPosition = e.clientY;\n            const position = {\n              x: xPosition,\n              y: yPosition\n            };\n            const dom = e.target;\n            this.state.onTableContextmenu(record, position, dom);\n          }\n        };\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }), React.createElement(DropList, {\n      dropPosition: _.cloneDeep(this.state.dropPosition),\n      dropData: _.cloneDeep(this.state.dropData),\n      isexist: _.cloneDeep(this.state.isexist),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default WyTable; //columns:[], 表格列对象\n//data:[], 表格列数据\n//onTableClick: function(){}, 表格行点击事件\n//onTableContextmenu: function(){} 表格行右键事件","map":{"version":3,"sources":["/industry/app/src/components/WyTable/index.js"],"names":["React","Component","_","DropList","sortColumns","WyTable","constructor","state","xData","yData","onTableClick","onTableContextmenu","dropPosition","x","y","dropData","isexist","componentDidMount","props","setState","componentWillReceiveProps","nextProps","activeRowKey","JSON","stringify","cloneDeep","dropListInfo","render","pageSize","pageSizeOptions","showSizeChanger","showQuickJumper","onShowSizeChange","current","size","rowSelection","undefined","expandedRowRender","record","onClick","onContextMenu","event","e","window","xPosition","clientX","yPosition","clientY","position","dom","target"],"mappings":"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","sourcesContent":["import React ,{ Component } from 'react'\r\nimport { Table } from 'antd'\r\nimport _ from 'lodash'\r\nimport DropList from '../DropList'\r\nimport sortColumns from '../TableSort'\r\n\r\nclass WyTable extends Component{\r\n  constructor(){\r\n    super()\r\n    this.state={\r\n      xData:[],\r\n      yData:[],\r\n      onTableClick: function(){},\r\n      onTableContextmenu: function(){},\r\n      dropPosition:{x:\"0px\",y:\"0px\"},\r\n      dropData: [],\r\n      isexist: false\r\n    }\r\n  }\r\n  componentDidMount(){\r\n    const {xData,yData} = this.props\r\n    let onTableClick\r\n    let onTableContextmenu\r\n    //点击事件判断\r\n    if(!this.props.onTableClick){\r\n       onTableClick = function(){}\r\n    }else{\r\n       onTableClick = this.props.onTableClick\r\n    }\r\n    //右键点击事件判断\r\n    if(!this.props.onTableContextmenu){\r\n       onTableContextmenu = function(){}\r\n    }else{\r\n       onTableContextmenu = this.props.onTableContextmenu\r\n    }\r\n    this.setState({\r\n      xData: sortColumns(xData),\r\n      yData: yData,\r\n      onTableClick,\r\n      onTableContextmenu\r\n    })\r\n  }\r\n  componentWillReceiveProps(nextProps){\r\n    if(nextProps.activeRowKey){\r\n      if(!(\r\n        JSON.stringify(_.cloneDeep(this.props.xData)) === JSON.stringify(_.cloneDeep(nextProps.xData)) &&\r\n        JSON.stringify(_.cloneDeep(this.props.yData)) === JSON.stringify(_.cloneDeep(nextProps.yData )) &&\r\n        this.props.activeRowKey === nextProps.activeRowKey &&\r\n        JSON.stringify(this.props.dropListInfo) === JSON.stringify(nextProps.dropListInfo)\r\n      )){\r\n        this.setState({\r\n          xData: sortColumns(nextProps.xData),\r\n          yData: [...nextProps.yData],\r\n          dropPosition: nextProps.dropListInfo?nextProps.dropListInfo.dropPosition:{x:\"0px\",y:\"0px\"},\r\n          dropData: nextProps.dropListInfo?nextProps.dropListInfo.dropData:[],\r\n          isexist: nextProps.dropListInfo?nextProps.dropListInfo.isexist: false\r\n        })\r\n      }\r\n    }else{\r\n      if(!(\r\n        JSON.stringify(_.cloneDeep(this.props.xData)) === JSON.stringify(_.cloneDeep(nextProps.xData)) &&\r\n        JSON.stringify(_.cloneDeep(this.props.yData)) === JSON.stringify(_.cloneDeep(nextProps.yData )) &&\r\n        JSON.stringify(this.props.dropListInfo) === JSON.stringify(nextProps.dropListInfo)\r\n      )){\r\n        this.setState({\r\n          xData: sortColumns(nextProps.xData),\r\n          yData: [...nextProps.yData],\r\n          dropPosition: nextProps.dropListInfo?nextProps.dropListInfo.dropPosition:{x:\"0px\",y:\"0px\"},\r\n          dropData: nextProps.dropListInfo?nextProps.dropListInfo.dropData:[],\r\n          isexist: nextProps.dropListInfo?nextProps.dropListInfo.isexist: false\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <div>\r\n        <Table\r\n          size=\"small\"\r\n          columns={this.state.xData}\r\n          dataSource={this.state.yData}\r\n          pagination={{\r\n            pageSize: this.props.pageSize?this.props.pageSize:5,\r\n            pageSizeOptions: [\"5\",\"10\",\"20\",\"30\",\"40\"],\r\n            showSizeChanger: true,\r\n            showQuickJumper: true,\r\n            onShowSizeChange: this.props.onShowSizeChange?(current,size)=>this.props.onShowSizeChange(current,size): function(){}\r\n          }}\r\n          rowSelection={this.props.rowSelection?this.props.rowSelection:undefined}\r\n          expandedRowRender={this.props.expandedRowRender?this.props.expandedRowRender:undefined}\r\n          onRow={(record)=>{\r\n              return {\r\n                onClick: ()=>{this.state.onTableClick(record)},\r\n                onContextMenu: (event)=>{\r\n                  let e = event || window.event\r\n                  const xPosition = e.clientX\r\n                  const yPosition = e.clientY\r\n                  const position= {\r\n                    x: xPosition,\r\n                    y: yPosition\r\n                  }\r\n                  const dom = e.target\r\n                  this.state.onTableContextmenu(record,position,dom)\r\n                }\r\n              }\r\n            }\r\n          }>\r\n          </Table>\r\n        <DropList\r\n          dropPosition={_.cloneDeep(this.state.dropPosition)}\r\n          dropData={_.cloneDeep(this.state.dropData)}\r\n          isexist={_.cloneDeep(this.state.isexist)}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default WyTable\r\n\r\n\r\n//columns:[], 表格列对象\r\n//data:[], 表格列数据\r\n//onTableClick: function(){}, 表格行点击事件\r\n//onTableContextmenu: function(){} 表格行右键事件\r\n"]},"metadata":{},"sourceType":"module"}